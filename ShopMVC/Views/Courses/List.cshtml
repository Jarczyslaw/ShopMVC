@model ShopMVC.ViewModels.CoursesListViewModel

@{
    ViewBag.Title = "Courses";
}

<div class="row">
    <form id="search-form">
        <input id="search-filter" type="search" name="searchQuery" data-autocomplete-source="@Url.Action(MVC.Courses.ActionNames.CoursesPrompt)" placeholder="Search for courses..." style="width: 400px;" />
    </form>
</div>

<h2>@ViewBag.Title</h2>
<p>
    Category name: @Model.Category.Title
</p>

@Html.Partial(MVC.Partial.Views._CoursesList, Model.Courses)

<script>
    $(function () {
        var setupAutoComplete = function () {
            var $input = $(this);

            var options = {
                source: $input.attr("data-autocomplete-source"),
                select: function (event, ui) {
                    $input = $(this);
                    $input.val(ui.item.label);
                    var $form = $input.parents("form:first");
                    $form.submit();
                }
            };

            $input.autocomplete(options);
        };

        $("#search-filter").each(setupAutoComplete);
    });
</script>